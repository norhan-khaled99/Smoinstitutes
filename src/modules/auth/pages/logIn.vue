<template>
  <div class="auth-page">
    <div class="column items-center">
      <div class="company-logo">
        <div class="logo-wrapper">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="606"
            height="74"
            viewBox="0 0 606 74"
            fill="none"
          >
            <g clip-path="url(#clip0_2575_6964)">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M180.778 21.6178C177.736 19.585 174.159 18.5 170.5 18.5V0C177.818 0 184.971 2.17001 191.056 6.23563C197.141 10.3012 201.883 16.0798 204.684 22.8407C207.484 29.6015 208.217 37.0411 206.789 44.2183C205.361 51.3956 201.838 57.9884 196.663 63.1629C191.488 68.3375 184.896 71.8614 177.718 73.289C170.541 74.7167 163.101 73.9839 156.341 71.1836C149.58 68.383 143.801 63.6407 139.736 57.5561C135.67 51.4714 133.5 44.3179 133.5 37H152C152 40.6589 153.085 44.2357 155.118 47.278C157.151 50.3204 160.04 52.6915 163.42 54.0918C166.801 55.4921 170.521 55.8583 174.109 55.1444C177.698 54.4307 180.994 52.6688 183.582 50.0815C186.169 47.4941 187.931 44.1978 188.644 40.6092C189.358 37.0205 188.992 33.3007 187.592 29.9204C186.192 26.5399 183.82 23.6506 180.778 21.6178Z"
                fill="#80D8F2"
              />
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M152 8.01282e-06C152 2.42946 151.521 4.83513 150.592 7.07964C149.662 9.32417 148.299 11.3636 146.581 13.0815C144.864 14.7994 142.824 16.1621 140.58 17.0918C138.335 18.0215 135.929 18.5 133.5 18.5L133.5 37C138.359 37 143.17 36.043 147.659 34.1836C152.148 32.3241 156.227 29.5987 159.663 26.1629C163.099 22.7273 165.824 18.6484 167.684 14.1593C169.543 9.67023 170.5 4.8589 170.5 0L152 8.01282e-06Z"
                fill="#80D8F2"
              />
            </g>
            <path
              d="M248.824 30.8693H242.449C242.267 29.8239 241.932 28.8977 241.443 28.0909C240.955 27.2727 240.347 26.5795 239.619 26.0114C238.892 25.4432 238.063 25.017 237.131 24.733C236.21 24.4375 235.216 24.2898 234.148 24.2898C232.25 24.2898 230.568 24.767 229.102 25.7216C227.636 26.6648 226.489 28.0511 225.659 29.8807C224.83 31.6989 224.415 33.9205 224.415 36.5455C224.415 39.2159 224.83 41.4659 225.659 43.2955C226.5 45.1136 227.648 46.4886 229.102 47.4205C230.568 48.3409 232.244 48.8011 234.131 48.8011C235.176 48.8011 236.153 48.6648 237.062 48.392C237.983 48.108 238.807 47.6932 239.534 47.1477C240.273 46.6023 240.892 45.9318 241.392 45.1364C241.903 44.3409 242.256 43.4318 242.449 42.4091L248.824 42.4432C248.585 44.1023 248.068 45.6591 247.273 47.1136C246.489 48.5682 245.46 49.8523 244.188 50.9659C242.915 52.0682 241.426 52.9318 239.722 53.5568C238.017 54.1705 236.125 54.4773 234.045 54.4773C230.977 54.4773 228.239 53.767 225.83 52.3466C223.42 50.9261 221.523 48.875 220.136 46.1932C218.75 43.5114 218.057 40.2955 218.057 36.5455C218.057 32.7841 218.756 29.5682 220.153 26.8977C221.551 24.2159 223.455 22.1648 225.864 20.7443C228.273 19.3239 231 18.6136 234.045 18.6136C235.989 18.6136 237.795 18.8864 239.466 19.4318C241.136 19.9773 242.625 20.7784 243.932 21.8352C245.239 22.8807 246.313 24.1648 247.153 25.6875C248.006 27.1989 248.563 28.9261 248.824 30.8693ZM261.876 54.5284C260.217 54.5284 258.723 54.233 257.393 53.642C256.075 53.0398 255.03 52.1534 254.257 50.983C253.496 49.8125 253.115 48.3693 253.115 46.6534C253.115 45.1761 253.388 43.9545 253.933 42.9886C254.479 42.0227 255.223 41.25 256.166 40.6705C257.109 40.0909 258.172 39.6534 259.354 39.358C260.547 39.0511 261.78 38.8295 263.053 38.6932C264.587 38.5341 265.831 38.392 266.786 38.267C267.74 38.1307 268.433 37.9261 268.865 37.6534C269.308 37.3693 269.53 36.9318 269.53 36.3409V36.2386C269.53 34.9545 269.149 33.9602 268.388 33.2557C267.626 32.5511 266.53 32.1989 265.098 32.1989C263.587 32.1989 262.388 32.5284 261.501 33.1875C260.626 33.8466 260.036 34.625 259.729 35.5227L253.967 34.7045C254.422 33.1136 255.172 31.7841 256.217 30.7159C257.263 29.6364 258.541 28.8295 260.053 28.2955C261.564 27.75 263.234 27.4773 265.064 27.4773C266.325 27.4773 267.581 27.625 268.831 27.9205C270.081 28.2159 271.223 28.7045 272.257 29.3864C273.291 30.0568 274.121 30.9716 274.746 32.1307C275.382 33.2898 275.7 34.7386 275.7 36.4773V54H269.768V50.4034H269.564C269.189 51.1307 268.661 51.8125 267.979 52.4489C267.308 53.0739 266.462 53.5795 265.439 53.9659C264.428 54.3409 263.24 54.5284 261.876 54.5284ZM263.479 49.9943C264.717 49.9943 265.791 49.75 266.7 49.2614C267.609 48.7614 268.308 48.1023 268.797 47.2841C269.297 46.4659 269.547 45.5739 269.547 44.608V41.5227C269.354 41.6818 269.024 41.8295 268.558 41.9659C268.104 42.1023 267.592 42.2216 267.024 42.3239C266.456 42.4261 265.893 42.517 265.337 42.5966C264.78 42.6761 264.297 42.7443 263.888 42.8011C262.967 42.9261 262.143 43.1307 261.416 43.4148C260.689 43.6989 260.115 44.0966 259.695 44.608C259.274 45.108 259.064 45.7557 259.064 46.5511C259.064 47.6875 259.479 48.5455 260.308 49.125C261.138 49.7045 262.195 49.9943 263.479 49.9943ZM281.905 54V27.8182H287.803V32.267H288.109C288.655 30.767 289.558 29.5966 290.82 28.7557C292.081 27.9034 293.587 27.4773 295.337 27.4773C297.109 27.4773 298.604 27.9091 299.82 28.7727C301.047 29.625 301.911 30.7898 302.411 32.267H302.683C303.263 30.8125 304.24 29.6534 305.615 28.7898C307.001 27.9148 308.643 27.4773 310.541 27.4773C312.95 27.4773 314.916 28.2386 316.439 29.7614C317.962 31.2841 318.723 33.5057 318.723 36.4261V54H312.536V37.3807C312.536 35.7557 312.104 34.5682 311.24 33.8182C310.376 33.0568 309.32 32.6761 308.07 32.6761C306.581 32.6761 305.416 33.142 304.575 34.0739C303.746 34.9943 303.331 36.1932 303.331 37.6705V54H297.28V37.125C297.28 35.7727 296.871 34.6932 296.053 33.8864C295.246 33.0795 294.189 32.6761 292.882 32.6761C291.996 32.6761 291.189 32.9034 290.462 33.358C289.734 33.8011 289.155 34.4318 288.723 35.25C288.291 36.0568 288.075 37 288.075 38.0795V54H281.905ZM325.256 54V19.0909H331.426V32.1477H331.682C332 31.5114 332.449 30.8352 333.028 30.1193C333.608 29.392 334.392 28.7727 335.381 28.2614C336.369 27.7386 337.631 27.4773 339.165 27.4773C341.188 27.4773 343.011 27.9943 344.636 29.0284C346.273 30.0511 347.568 31.5682 348.523 33.5795C349.489 35.5795 349.972 38.0341 349.972 40.9432C349.972 43.8182 349.5 46.2614 348.557 48.2727C347.614 50.2841 346.33 51.8182 344.705 52.875C343.08 53.9318 341.239 54.4602 339.182 54.4602C337.682 54.4602 336.438 54.2102 335.449 53.7102C334.46 53.2102 333.665 52.608 333.062 51.9034C332.472 51.1875 332.011 50.5114 331.682 49.875H331.324V54H325.256ZM331.307 40.9091C331.307 42.6023 331.545 44.0852 332.023 45.358C332.511 46.6307 333.21 47.625 334.119 48.3409C335.04 49.0455 336.153 49.3977 337.46 49.3977C338.824 49.3977 339.966 49.0341 340.886 48.3068C341.807 47.5682 342.5 46.5625 342.966 45.2898C343.443 44.0057 343.682 42.5455 343.682 40.9091C343.682 39.2841 343.449 37.8409 342.983 36.5795C342.517 35.3182 341.824 34.3295 340.903 33.6136C339.983 32.8977 338.835 32.5398 337.46 32.5398C336.142 32.5398 335.023 32.8864 334.102 33.5795C333.182 34.2727 332.483 35.2443 332.006 36.4943C331.54 37.7443 331.307 39.2159 331.307 40.9091ZM355.217 54V27.8182H361.2V32.1818H361.473C361.95 30.6705 362.768 29.5057 363.928 28.6875C365.098 27.858 366.433 27.4432 367.933 27.4432C368.274 27.4432 368.655 27.4602 369.075 27.4943C369.507 27.517 369.865 27.5568 370.149 27.6136V33.2898C369.888 33.1989 369.473 33.1193 368.905 33.0511C368.348 32.9716 367.808 32.9318 367.286 32.9318C366.161 32.9318 365.149 33.1761 364.251 33.6648C363.365 34.142 362.666 34.8068 362.155 35.6591C361.643 36.5114 361.388 37.4943 361.388 38.608V54H355.217ZM374.249 54V27.8182H380.419V54H374.249ZM377.351 24.1023C376.374 24.1023 375.533 23.7784 374.828 23.1307C374.124 22.4716 373.771 21.6818 373.771 20.7614C373.771 19.8295 374.124 19.0398 374.828 18.392C375.533 17.733 376.374 17.4034 377.351 17.4034C378.339 17.4034 379.18 17.733 379.874 18.392C380.578 19.0398 380.93 19.8295 380.93 20.7614C380.93 21.6818 380.578 22.4716 379.874 23.1307C379.18 23.7784 378.339 24.1023 377.351 24.1023ZM396.48 54.4602C394.423 54.4602 392.582 53.9318 390.957 52.875C389.332 51.8182 388.048 50.2841 387.105 48.2727C386.162 46.2614 385.69 43.8182 385.69 40.9432C385.69 38.0341 386.168 35.5795 387.122 33.5795C388.088 31.5682 389.389 30.0511 391.026 29.0284C392.662 27.9943 394.486 27.4773 396.497 27.4773C398.031 27.4773 399.293 27.7386 400.281 28.2614C401.27 28.7727 402.054 29.392 402.634 30.1193C403.213 30.8352 403.662 31.5114 403.98 32.1477H404.236V19.0909H410.423V54H404.355V49.875H403.98C403.662 50.5114 403.202 51.1875 402.599 51.9034C401.997 52.608 401.202 53.2102 400.213 53.7102C399.224 54.2102 397.98 54.4602 396.48 54.4602ZM398.202 49.3977C399.509 49.3977 400.622 49.0455 401.543 48.3409C402.463 47.625 403.162 46.6307 403.639 45.358C404.116 44.0852 404.355 42.6023 404.355 40.9091C404.355 39.2159 404.116 37.7443 403.639 36.4943C403.173 35.2443 402.48 34.2727 401.56 33.5795C400.651 32.8864 399.531 32.5398 398.202 32.5398C396.827 32.5398 395.679 32.8977 394.759 33.6136C393.838 34.3295 393.145 35.3182 392.679 36.5795C392.213 37.8409 391.98 39.2841 391.98 40.9091C391.98 42.5455 392.213 44.0057 392.679 45.2898C393.156 46.5625 393.855 47.5682 394.776 48.3068C395.707 49.0341 396.849 49.3977 398.202 49.3977ZM428.385 64.3636C426.169 64.3636 424.266 64.0625 422.675 63.4602C421.084 62.8693 419.805 62.0739 418.839 61.0739C417.874 60.0739 417.203 58.9659 416.828 57.75L422.385 56.4034C422.635 56.9148 422.999 57.4205 423.476 57.9205C423.953 58.4318 424.595 58.8523 425.402 59.1818C426.22 59.5227 427.249 59.6932 428.487 59.6932C430.237 59.6932 431.686 59.267 432.834 58.4148C433.982 57.5739 434.555 56.1875 434.555 54.2557V49.2955H434.249C433.93 49.9318 433.464 50.5852 432.851 51.2557C432.249 51.9261 431.447 52.4886 430.447 52.9432C429.459 53.3977 428.214 53.625 426.714 53.625C424.703 53.625 422.879 53.1534 421.243 52.2102C419.618 51.2557 418.322 49.8352 417.357 47.9489C416.402 46.0511 415.925 43.6761 415.925 40.8239C415.925 37.9489 416.402 35.5227 417.357 33.5455C418.322 31.5568 419.624 30.0511 421.26 29.0284C422.896 27.9943 424.72 27.4773 426.732 27.4773C428.266 27.4773 429.527 27.7386 430.516 28.2614C431.516 28.7727 432.311 29.392 432.902 30.1193C433.493 30.8352 433.942 31.5114 434.249 32.1477H434.589V27.8182H440.675V54.4261C440.675 56.6648 440.141 58.517 439.072 59.983C438.004 61.4489 436.544 62.5455 434.692 63.2727C432.839 64 430.737 64.3636 428.385 64.3636ZM428.436 48.7841C429.743 48.7841 430.857 48.4659 431.777 47.8295C432.697 47.1932 433.396 46.2784 433.874 45.0852C434.351 43.892 434.589 42.4602 434.589 40.7898C434.589 39.142 434.351 37.6989 433.874 36.4602C433.408 35.2216 432.714 34.2614 431.794 33.5795C430.885 32.8864 429.766 32.5398 428.436 32.5398C427.061 32.5398 425.913 32.8977 424.993 33.6136C424.072 34.3295 423.379 35.3125 422.913 36.5625C422.447 37.8011 422.214 39.2102 422.214 40.7898C422.214 42.392 422.447 43.7955 422.913 45C423.391 46.1932 424.089 47.125 425.01 47.7955C425.942 48.4545 427.084 48.7841 428.436 48.7841ZM458.589 54.5114C455.964 54.5114 453.697 53.9659 451.788 52.875C449.891 51.7727 448.43 50.2159 447.408 48.2045C446.385 46.1818 445.874 43.8011 445.874 41.0625C445.874 38.3693 446.385 36.0057 447.408 33.9716C448.442 31.9261 449.885 30.3352 451.737 29.1989C453.589 28.0511 455.766 27.4773 458.266 27.4773C459.879 27.4773 461.402 27.7386 462.834 28.2614C464.277 28.7727 465.55 29.5682 466.652 30.6477C467.766 31.7273 468.641 33.1023 469.277 34.7727C469.913 36.4318 470.232 38.4091 470.232 40.7045V42.5966H448.771V38.4375H464.317C464.305 37.2557 464.05 36.2045 463.55 35.2841C463.05 34.3523 462.351 33.6193 461.453 33.0852C460.567 32.5511 459.533 32.2841 458.351 32.2841C457.089 32.2841 455.982 32.5909 455.027 33.2045C454.072 33.8068 453.328 34.6023 452.794 35.5909C452.271 36.5682 452.004 37.642 451.993 38.8125V42.4432C451.993 43.9659 452.271 45.2727 452.828 46.3636C453.385 47.4432 454.163 48.2727 455.163 48.8523C456.163 49.4205 457.334 49.7045 458.675 49.7045C459.572 49.7045 460.385 49.5795 461.112 49.3295C461.839 49.0682 462.47 48.6875 463.004 48.1875C463.538 47.6875 463.942 47.0682 464.214 46.3295L469.976 46.9773C469.612 48.5 468.919 49.8295 467.896 50.9659C466.885 52.0909 465.589 52.9659 464.01 53.5909C462.43 54.2045 460.624 54.5114 458.589 54.5114Z"
              fill="#36394A"
            />
            <defs>
              <clipPath id="clip0_2575_6964">
                <rect
                  width="74"
                  height="74"
                  fill="white"
                  transform="translate(133.5)"
                />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>

      <div class="login-card">
        <p class="card-title">Cambridge Aden ERP System</p>

        <div v-if="hasError" class="error-alert">
          <div class="error-message">
            <svg
              class="error-icon"
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9.00005 16.2C10.9096 16.2 12.741 15.4414 14.0912 14.0912C15.4415 12.7409 16.2 10.9096 16.2 9C16.2 7.09044 15.4415 5.2591 14.0912 3.90883C12.741 2.55857 10.9096 1.8 9.00005 1.8C7.09049 1.8 5.25914 2.55857 3.90888 3.90883C2.55862 5.2591 1.80005 7.09044 1.80005 9C1.80005 10.9096 2.55862 12.7409 3.90888 14.0912C5.25914 15.4414 7.09049 16.2 9.00005 16.2ZM7.83635 6.5637C7.66661 6.39976 7.43927 6.30905 7.20329 6.3111C6.96731 6.31315 6.74158 6.4078 6.57471 6.57467C6.40784 6.74153 6.31319 6.96727 6.31114 7.20324C6.30909 7.43922 6.39981 7.66656 6.56375 7.8363L7.72745 9L6.56375 10.1637C6.47779 10.2467 6.40923 10.346 6.36206 10.4558C6.31489 10.5656 6.29006 10.6837 6.28902 10.8032C6.28798 10.9227 6.31076 11.0413 6.35601 11.1519C6.40126 11.2625 6.46809 11.363 6.55259 11.4475C6.6371 11.532 6.73758 11.5988 6.84819 11.644C6.9588 11.6893 7.07731 11.7121 7.19681 11.711C7.31631 11.71 7.43441 11.6852 7.54421 11.638C7.65402 11.5908 7.75333 11.5223 7.83635 11.4363L9.00005 10.2726L10.1637 11.4363C10.3335 11.6002 10.5608 11.691 10.7968 11.6889C11.0328 11.6869 11.2585 11.5922 11.4254 11.4253C11.5923 11.2585 11.6869 11.0327 11.689 10.7968C11.691 10.5608 11.6003 10.3334 11.4363 10.1637L10.2726 9L11.4363 7.8363C11.6003 7.66656 11.691 7.43922 11.689 7.20324C11.6869 6.96727 11.5923 6.74153 11.4254 6.57467C11.2585 6.4078 11.0328 6.31315 10.7968 6.3111C10.5608 6.30905 10.3335 6.39976 10.1637 6.5637L9.00005 7.7274L7.83635 6.5637Z"
                fill="#C81E1E"
              />
            </svg>
            <span
              ><span class="error-heading">Invalid Login:</span> Invalid
              username or password. Please try again.</span
            >
          </div>
          <svg
            class="cursor-pointer"
            @click="hasError = false"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M4.29303 4.293C4.48056 4.10553 4.73487 4.00021 5.00003 4.00021C5.26519 4.00021 5.5195 4.10553 5.70703 4.293L10 8.586L14.293 4.293C14.3853 4.19749 14.4956 4.1213 14.6176 4.0689C14.7396 4.01649 14.8709 3.9889 15.0036 3.98775C15.1364 3.98659 15.2681 4.01189 15.391 4.06218C15.5139 4.11246 15.6255 4.18671 15.7194 4.2806C15.8133 4.37449 15.8876 4.48615 15.9379 4.60904C15.9881 4.73194 16.0134 4.86362 16.0123 4.9964C16.0111 5.12918 15.9835 5.2604 15.9311 5.3824C15.8787 5.50441 15.8025 5.61475 15.707 5.707L11.414 10L15.707 14.293C15.8892 14.4816 15.99 14.7342 15.9877 14.9964C15.9854 15.2586 15.8803 15.5094 15.6948 15.6948C15.5094 15.8802 15.2586 15.9854 14.9964 15.9877C14.7342 15.9899 14.4816 15.8892 14.293 15.707L10 11.414L5.70703 15.707C5.51843 15.8892 5.26583 15.9899 5.00363 15.9877C4.74143 15.9854 4.49062 15.8802 4.30521 15.6948C4.1198 15.5094 4.01463 15.2586 4.01236 14.9964C4.01008 14.7342 4.11087 14.4816 4.29303 14.293L8.58603 10L4.29303 5.707C4.10556 5.51947 4.00024 5.26516 4.00024 5C4.00024 4.73483 4.10556 4.48053 4.29303 4.293Z"
              fill="#C81E1E"
            />
          </svg>
        </div>

        <q-form class="rounded-borders" @submit.prevent="login">
          <label class="field-label">Username</label>
          <q-input
            v-model="form.username"
            class="email-field"
            outlined
            placeholder="Enter Your username"
            :error="hasError"
            no-error-icon
            hide-bottom-space
          ></q-input>

          <label class="field-label">Password</label>
          <q-input
            v-model="form.password"
            :type="isPwd ? 'password' : 'text'"
            class="password-field"
            outlined
            placeholder="Enter Your Password"
            :error="hasError"
            no-error-icon
            hide-bottom-space
          >
            <template v-slot:append>
              <div class="cursor-pointer" @click="isPwd = !isPwd">
                <!-- Eye Icon (Password hidden) -->
                <svg
                  v-if="isPwd"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M21.2699 9.67834C20.9799 9.21834 20.6699 8.78834 20.3499 8.38834C19.9799 7.91834 19.2799 7.87834 18.8599 8.29834L15.8599 11.2983C16.0799 11.9583 16.1199 12.7183 15.9199 13.5083C15.5699 14.9183 14.4299 16.0583 13.0199 16.4083C12.2299 16.6083 11.4699 16.5683 10.8099 16.3483C10.8099 16.3483 9.37995 17.7783 8.34995 18.8083C7.84995 19.3083 8.00995 20.1883 8.67995 20.4483C9.74995 20.8583 10.8599 21.0683 11.9999 21.0683C13.7799 21.0683 15.5099 20.5483 17.0899 19.5783C18.6999 18.5783 20.1499 17.1083 21.3199 15.2383C22.2699 13.7283 22.2199 11.1883 21.2699 9.67834Z"
                    fill="#BBBBBB"
                  />
                  <path
                    d="M14.0199 10.4806L9.97989 14.5206C9.46989 14.0006 9.13989 13.2806 9.13989 12.5006C9.13989 10.9306 10.4199 9.64062 11.9999 9.64062C12.7799 9.64062 13.4999 9.97062 14.0199 10.4806Z"
                    fill="#BBBBBB"
                  />
                  <path
                    d="M18.25 6.24969L14.86 9.63969C14.13 8.89969 13.12 8.45969 12 8.45969C9.76 8.45969 7.96 10.2697 7.96 12.4997C7.96 13.6197 8.41 14.6297 9.14 15.3597L5.76 18.7497H5.75C4.64 17.8497 3.62 16.6997 2.75 15.3397C1.75 13.7697 1.75 11.2197 2.75 9.64969C3.91 7.82969 5.33 6.39969 6.91 5.41969C8.49 4.45969 10.22 3.92969 12 3.92969C14.23 3.92969 16.39 4.74969 18.25 6.24969Z"
                    fill="#BBBBBB"
                  />
                  <path
                    d="M14.8601 12.4981C14.8601 14.0681 13.5801 15.3581 12.0001 15.3581C11.9401 15.3581 11.8901 15.3581 11.8301 15.3381L14.8401 12.3281C14.8601 12.3881 14.8601 12.4381 14.8601 12.4981Z"
                    fill="#BBBBBB"
                  />
                  <path
                    d="M21.7699 2.72891C21.4699 2.42891 20.9799 2.42891 20.6799 2.72891L2.22988 21.1889C1.92988 21.4889 1.92988 21.9789 2.22988 22.2789C2.37988 22.4189 2.56988 22.4989 2.76988 22.4989C2.96988 22.4989 3.15988 22.4189 3.30988 22.2689L21.7699 3.80891C22.0799 3.50891 22.0799 3.02891 21.7699 2.72891Z"
                    fill="#BBBBBB"
                  />
                </svg>
                <svg
                  v-else
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                >
                  <path
                    d="M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z"
                    fill="#BBBBBB"
                  />
                  <path
                    d="M12 9.14062C10.43 9.14062 9.14999 10.4206 9.14999 12.0006C9.14999 13.5706 10.43 14.8506 12 14.8506C13.57 14.8506 14.86 13.5706 14.86 12.0006C14.86 10.4306 13.57 9.14062 12 9.14062Z"
                    fill="#BBBBBB"
                  />
                </svg>

                <!-- Crossed Eye Icon (Password visible) -->
              </div>
            </template>
          </q-input>
          <div class="col-md-12 action-btn-container">
            <q-btn type="submit" label="Login to System" class="full-width" />
          </div>
        </q-form>
      </div>
    </div>

    <!--start form -->

    <!--start form -->
  </div>
</template>
<script>
import { ref } from "vue";
import { useRouter } from "vue-router";
import { useQuasar } from "quasar";
import rules from "src/config/rules";
import authServices from "../services/service.js";

export default {
  setup() {
    const $q = useQuasar();
    const router = useRouter();

    /** start object form **/
    const isPwd = ref(true);
    const hasError = ref(false);
    const form = ref({
      username: "",
      password: "",
    });

    /** end object form **/
    /** start login integration**/
    const data = ref([]);
    const parseJwt = (token) => {
      var base64Url = token.split(".")[1];

      var base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");

      var jsonPayload = decodeURIComponent(
        window
          .atob(base64)
          .split("")
          .map(function (c) {
            return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
          })
          .join(""),
      );
      data.value = JSON.parse(jsonPayload);
    };
    // // fun of login
    const login = () => {
      const emailRegex =
        /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;

      if (
        !form.value.username ||
        !form.value.password ||
        !emailRegex.test(form.value.username) ||
        form.value.username !== "Test_Admin@local" ||
        form.value.password !== "AAAbbb123"
      ) {
        hasError.value = true;
      } else {
        hasError.value = false;
        $q.loading.show();

        authServices
          .logIn(form.value)
          .then((res) => {
              console.log("login response", res.data.access);
              localStorage.setItem("accessToken", res.data.access);
              router.push({ name: "students" });
              $q.loading.hide();
          })
          .catch((error) => {
            $q.loading.hide();
            $q.notify({
              badgeStyle: "display:none",
              classes: "custom-Notify",
              textColor: "black-1",
              icon: "img:/images/Error.png",
              position: "bottom-right",
              message: error.response?.data?.result || "An error occurred.",
            });
          });
      }
    };
    /** end login integration**/
    return {
      form,
      isPwd,
      hasError,
      login,
      rules,
      parseJwt,
      data,
    };
  },
};
</script>
